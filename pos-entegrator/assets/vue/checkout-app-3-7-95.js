import{ae as C,o as u,c,a as r,C as w,g as p,u as l,T as Y,h as V,t as v,s as y,I as K,F as A,j,E as X,b,ag as Z,n as E,ah as ee,ai as L,e as S,aj as te,w as x,q as T,ak as z,x as P,d as B,L as M,al as ne,am as ae,an as se,B as oe,m as re,ad as U,ao as le,ap as ie,aq as de}from"./vendor-3-7-95.js";import{u as f}from"./CheckoutStore-3-7-95.js";import{_ as ue}from"./_plugin-vue_export-helper-3-7-95.js";import{u as ce}from"./ajax-3-7-95.js";import{p as D}from"./store-3-7-95.js";const me=d=>{const e=document.getElementById("_gpos_nonce").value,t=C.random.getBytesSync(16),s=C.cipher.createCipher("AES-CBC",C.util.hexToBytes(C.md.sha256.create().update(e).digest().toHex()));return s.start({iv:t}),s.update(C.util.createBuffer(d,"utf8")),s.finish(),{hex:s.output.toHex(),iv:C.util.bytesToHex(t)}},pe=["value"],_e=["value"],Ft={__name:"Fragments",setup(d){const e=w("");return document.addEventListener("gpos-inputs-changed",async t=>{e.value=me(JSON.stringify(t.detail)),window.gpos.fragment={_wp_refreshed_fragments:e.value.hex,_wp_fragment:e.value.iv}}),(t,s)=>(u(),c("div",null,[r("input",{type:"hidden",name:"_wp_refreshed_fragments",value:e.value.hex},null,8,pe),r("input",{type:"hidden",name:"_wp_fragment",value:e.value.iv},null,8,_e)]))}},ve={class:"w-full bg-red-200 text-red-700 p-3 rounded font-semibold flex gap-2"},Vt={__name:"GatewayError",setup(d){return(e,t)=>(u(),c("div",ve,[p(l(Y),{class:"w-10"}),V(" "+v(e.$t("gateway_error")),1)]))}},fe={key:0,class:"bg-yellow-100 text-yellow-700 p-3 flex flex-col rounded gap-2"},ye={class:"flex items-center justify-between text-lg font-semibold"},ge={class:"flex items-center gap-2"},he=["src"],be={key:0,class:"text-xs"},xe={class:"hidden md:table-cell"},we=["src"],$e={class:"hidden md:table-cell"},ke={class:"hidden md:table-cell"},Ce={class:"hidden md:table-cell"},Ee={__name:"TestMode",setup(d){const{card:e,virtualPOS:t,assetsUrl:s,isTestMode:n}=y(f()),m=a=>{e.value.bin=a.bin,e.value.expiry_year=a.expiry_year,e.value.expiry_month=a.expiry_month,e.value.expiry=`${a.expiry_month} / ${a.expiry_year}`,e.value.cvv=a.cvv};return(a,i)=>l(n)?(u(),c("div",fe,[r("div",ye,[r("div",ge,[p(l(K),{class:"w-6"}),V(v(a.$t("test_mode_title")),1)]),r("img",{src:l(t).logo,class:"w-[80px]"},null,8,he)]),r("div",null,v(a.$t("test_mode_checkout_desc")),1),l(t).test_cards.length>0?(u(),c("table",be,[r("tr",null,[i[0]||(i[0]=r("th",null,null,-1)),r("th",null,v(a.$t("card_bin")),1),r("th",xe,v(a.$t("month_year")),1),i[1]||(i[1]=r("th",{class:"hidden md:table-cell"}," Cvc ",-1)),i[2]||(i[2]=r("th",{class:"hidden md:table-cell"}," 3ds ",-1)),i[3]||(i[3]=r("th",null,null,-1))]),r("tbody",null,[(u(!0),c(A,null,j(l(t).test_cards,(o,k)=>(u(),c("tr",{key:k,class:"!border-b !border-yellow-700"},[r("td",null,[r("img",{class:"!w-8",src:`${l(s)}/images/card/${o.brand}.svg`},null,8,we)]),r("td",null,v(o.bin),1),r("td",$e,v(o.expiry_month)+"/"+v(o.expiry_year),1),r("td",ke,v(o.cvv),1),r("td",Ce,v(o.secure),1),r("td",null,[p(l(X),{class:"!w-6 cursor-pointer",onClick:I=>m(o)},null,8,["onClick"])])]))),128))])])):b("",!0)])):b("",!0)}},Se={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},Fe=["placeholder"],Ve={__name:"HolderName",setup(d){const{formSettings:e}=f(),t=w(!1);return(s,n)=>l(e).holder_name_field?(u(),c("div",{key:0,class:E(`flex w-full border !rounded ${t.value?"border-blue-700":"border-gray-300"}`)},[r("span",Se,[p(l(Z),{class:"w-6 h-6 mx-3","aria-hidden":"true"})]),r("input",{id:"gpos-card-holder-name",type:"text",placeholder:s.$t("name_on_card"),onFocus:n[0]||(n[0]=m=>t.value=!t.value),onFocusout:n[1]||(n[1]=m=>t.value=!t.value)},null,40,Fe)],2)):b("",!0)}},Ae={},je={class:"dot-spinner mx-3"};function Te(d,e){return u(),c("div",je,[...e[0]||(e[0]=[ee('<div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div>',8)])])}const De=ue(Ae,[["render",Te]]),Le={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},Ue=["src"],Ie={__name:"BinNumber",setup(d){const{card:e,assetsUrl:t}=y(f()),{loading:s}=y(ce()),n=w(!1);return(m,a)=>{const i=L("cardformat");return u(),c("div",{class:E(`flex w-full !border !rounded ${n.value?"!border-blue-700":"!border-gray-300"}`)},[r("span",Le,[l(s)?(u(),S(De,{key:0,class:"!w-6 !h-6"})):["visa","mastercard","amex","troy"].includes(l(e).brand)?(u(),c("img",{key:1,class:"!w-12 !h-12 !m-0",src:`${l(t)}/images/card/${l(e).brand}.svg`},null,8,Ue)):(u(),S(l(te),{key:2,class:"!w-6 h-6 !mx-3","aria-hidden":"true"}))]),x(r("input",{id:"gpos-card-bin","onUpdate:modelValue":a[0]||(a[0]=o=>l(e).bin=o),class:"",placeholder:"•••• •••• •••• ••••",inputmode:"numeric",type:"tel",autocomplete:"cc-number",onFocus:a[1]||(a[1]=o=>n.value=!n.value),onFocusout:a[2]||(a[2]=o=>n.value=!n.value)},null,544),[[T,l(e).bin],[i,void 0,"formatCardNumber"]])],2)}}},Pe={class:"inline-flex relative !rounded-l items-center justify-center text-sm !bg-white !w-12 !min-w-max"},Be={class:"flex w-full"},Re={value:""},Ne=["value","textContent"],Oe={value:""},qe=["value","textContent"],He={__name:"Select",setup(d){const e=f(),{card:t}=y(e),s=w(!1),n=new Date().getFullYear(),m=Array.from({length:17},(a,i)=>(n+i).toString());return(a,i)=>(u(),c("div",{class:E(`flex w-full !border !rounded ${s.value?"!border-blue-700":"!border-gray-300"}`)},[r("span",Pe,[p(l(z),{class:"!w-6 !h-6 !mx-3","aria-hidden":"true"})]),r("div",Be,[x(r("select",{id:"gpos-card-expiry-month","onUpdate:modelValue":i[0]||(i[0]=o=>l(t).expiry_month=o),autocomplete:"cc-exp-month",class:"!border-0 !rounded-r !bg-white !m-0 !p-3 !focus:ring-0 !outline-0 !focus:ring-offset-0 !w-1/2",onFocus:i[1]||(i[1]=o=>s.value=!s.value),onFocusout:i[2]||(i[2]=o=>s.value=!s.value)},[r("option",Re,v(a.$t("mm")),1),(u(),c(A,null,j(["01","02","03","04","05","06","07","08","09","10","11","12"],o=>r("option",{key:o,value:o,textContent:v(o)},null,8,Ne)),64))],544),[[P,l(t).expiry_month]]),x(r("select",{id:"gpos-card-expiry-year","onUpdate:modelValue":i[3]||(i[3]=o=>l(t).expiry_year=o),autocomplete:"cc-exp-year",class:"!border-0 !rounded-r !bg-white !m-0 !p-3 !focus:ring-0 !outline-0 !focus:ring-offset-0 !w-1/2",onFocus:i[4]||(i[4]=o=>s.value=!s.value),onFocusout:i[5]||(i[5]=o=>s.value=!s.value)},[r("option",Oe,v(a.$t("yy")),1),(u(!0),c(A,null,j(l(m),o=>(u(),c("option",{key:o,value:o,textContent:v(o)},null,8,qe))),128))],544),[[P,l(t).expiry_year]])])],2))}},Ye={class:"inline-flex relative !rounded-l items-center justify-center text-sm !bg-white !w-12 !min-w-max"},ze=["placeholder"],Me=["value"],Qe=["value"],Ge={__name:"Text",setup(d){const{card:e}=y(f()),t=w(!1),s=B(()=>{var m,a;return(a=(m=e.value.expiry)==null?void 0:m.replaceAll(/\s/g,""))==null?void 0:a.split("/")[0]}),n=B(()=>{var m,a,i;return(i=(a=(m=e.value.expiry)==null?void 0:m.replaceAll(/\s/g,""))==null?void 0:a.split("/")[1])==null?void 0:i.slice(-2)});return(m,a)=>{const i=L("cardformat");return u(),c("div",{class:E(`flex w-full !border !rounded ${t.value?"!border-blue-700":"!border-gray-300"}`)},[r("span",Ye,[p(l(z),{class:"!w-6 !h-6","aria-hidden":"true"})]),x(r("input",{id:"gpos-card-expiry","onUpdate:modelValue":a[0]||(a[0]=o=>l(e).expiry=o),placeholder:m.$t("mmyy"),inputmode:"numeric",type:"tel",autocomplete:"cc-exp",onFocus:a[1]||(a[1]=o=>t.value=!t.value),onFocusout:a[2]||(a[2]=o=>t.value=!t.value)},null,40,ze),[[T,l(e).expiry],[i,void 0,"formatCardExpiry"]]),r("input",{id:"gpos-card-expiry-month",type:"hidden",value:s.value},null,8,Me),r("input",{id:"gpos-card-expiry-year",type:"hidden",value:n.value},null,8,Qe)],2)}}},Je={__name:"Expiry",setup(d){const{formSettings:e}=f(),t=e.expiry_style=="select"?He:Ge;return(s,n)=>(u(),S(M(l(t))))}},We={class:"inline-flex relative !rounded-l !items-center justify-center text-sm !bg-white !w-12 !min-w-max"},Ke=["src"],Xe={__name:"Cvc",setup(d){const e=f(),{card:t,assetsUrl:s}=y(e),n=w(!1);return(m,a)=>{const i=L("cardformat");return u(),c("div",{class:E(`relative flex w-full !border !bg-white !rounded ${n.value?"!border-blue-700":"!border-gray-300"}`)},[r("span",We,[p(l(ne),{class:"!w-6 !h-6 !mx-3","aria-hidden":"true"})]),x(r("input",{id:"gpos-card-cvv","onUpdate:modelValue":a[0]||(a[0]=o=>l(t).cvv=o),placeholder:"CVC",inputmode:"numeric",type:"tel",autocomplete:"cc-csc",onFocus:a[1]||(a[1]=o=>n.value=!n.value),onFocusout:a[2]||(a[2]=o=>n.value=!n.value)},null,544),[[T,l(t).cvv],[i,void 0,"formatCardCVC"]]),r("span",{class:"inline-flex relative !rounded z-10 items-center justify-center text-sm !bg-white !w-12 !min-w-max !px-2",style:ae(`${n.value?"transform: rotateY(180deg);":""}   transform-style: preserve-3d;
        transition: transform 0.5s;`)},[a[3]||(a[3]=r("div",{class:"!w-6 !h-6 absolute","aria-hidden":"true",style:{"backface-visibility":"hidden"}},null,-1)),r("img",{class:"!w-8 !h-6 absolute",src:`${l(s)}/images/cvc.svg`,style:{"backface-visibility":"hidden",transform:"rotateY(180deg)"}},null,8,Ke)],4)],2)}}},Ze={class:"flex flex-col w-full gap-4"},et={class:"flex w-full flex-col gap-2 md:flex-row md:justify-between"},R={__name:"StandartForm",setup(d){return(e,t)=>(u(),c("div",Ze,[p(Ie),r("div",et,[p(Je),p(Xe)])]))}},tt={__name:"CardInputForm",setup(d){const{formSettings:e}=f(),t=()=>{switch(e.display_type){case"standart_form":return R;default:return R}};return(s,n)=>(u(),S(M(t())))}},nt={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},at=["placeholder"],st={__name:"CardName",setup(d){const e=w(!1);return(t,s)=>(u(),c("div",{class:E(`flex w-full border !rounded ${e.value?"border-blue-700":"border-gray-300"}`)},[r("span",nt,[p(l(se),{class:"w-6 h-6 mx-3","aria-hidden":"true"})]),r("input",{id:"gpos-card-name",type:"text",placeholder:t.$t("card_name"),onFocus:s[0]||(s[0]=n=>e.value=!e.value),onFocusout:s[1]||(s[1]=n=>e.value=!e.value)},null,40,at)],2))}},ot={key:0,class:"flex flex-col my-2"},rt={key:0,class:"w-full flex items-center justify-start p-2 gap-2 bg-blue-50 border-blue-600 text-blue-800 border rounded"},lt={key:1,class:"text-sm font-medium text-gray-900 flex items-center gap-1 cursor-pointer"},it={__name:"SaveCard",setup(d){const{userId:e,cardSaveSettings:t}=f(),{saveCurrentCard:s,virtualPOS:n}=y(f()),m=window.wc_checkout_params||!1;return(a,i)=>l(n).supports.includes("save_card")&&l(t).active?(u(),c("div",ot,[l(t).force_save&&l(t).save_info&&l(m)?(u(),c("div",rt,[p(l(Y),{class:"!w-6 !h-6 mt-1","aria-hidden":"true"}),V(" "+v(l(t).save_info),1)])):b("",!0),l(e)&&!l(t).force_save?(u(),c("label",lt,[x(r("input",{id:"gpos-save-card","onUpdate:modelValue":i[0]||(i[0]=o=>re(s)?s.value=o:null),type:"checkbox",value:"on",class:"border-gray-300 rounded !block !m-0"},null,512),[[oe,l(s)]]),V(" "+v(a.$t("save_card_checkout")),1)])):b("",!0),l(s)&&l(t).name_field==="show_field"?(u(),S(st,{key:2})):b("",!0)])):b("",!0)}},dt={class:"hidden"},ut=["id","onUpdate:modelValue"],ct={__name:"HiddenCardData",setup(d){const{card:e}=y(f());return(t,s)=>(u(),c("div",dt,[(u(),c(A,null,j(["type","brand","family","bank_name","bank_code","country","country_code"],n=>x(r("input",{id:`gpos-card-${n.replaceAll("_","-")}`,key:n,"onUpdate:modelValue":m=>l(e)[n]=m,type:"hidden"},null,8,ut),[[T,l(e)[n]]])),64))]))}},mt={class:"flex flex-col gap-4"},At={__name:"CardForm",setup(d){return(e,t)=>(u(),c("div",mt,[p(Ee),p(Ve),p(tt),p(it),p(ct)]))}},$=()=>{const d=window.jQuery;let e={};d(".gpos-checkout-class :input").each((t,s)=>{let n=d(s);if(!(n.attr("type")==="checkbox"&&!n.is(":checked"))){if(n.data("name")==="gpos-installment"){n.is(":checked")&&(e["gpos-installment-rate"]=n.data("rate"),e[n.data("name")]=n.val()),n.prop("tagName")==="SELECT"&&(e["gpos-installment-rate"]=n.find(":selected").data("rate"),e[n.data("name")]=n.find(":selected").val());return}n.attr("id")&&(e[n.attr("id")]=n.val())}}),document.dispatchEvent(new CustomEvent("gpos-inputs-changed",{detail:e}))},pt=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),_t=function(d){return"/"+d},N={},F=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(o=>{if(o=_t(o),o in N)return;N[o]=!0;const k=o.endsWith(".css"),I=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${I}`))return;const g=document.createElement("link");if(g.rel=k?"stylesheet":pt,k||(g.as="script"),g.crossOrigin="",g.href=o,i&&g.setAttribute("nonce",i),document.head.appendChild(g),k)return new Promise((J,W)=>{g.addEventListener("load",J),g.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${o}`)))})}))}function m(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return n.then(a=>{for(const i of a||[])i.status==="rejected"&&m(i.reason);return e().catch(m)})};try{let d=!1;const e=window.jQuery,t=async()=>{d&&await d.unmount(),document.getElementById("app")&&(d=window.gposCreateCheckoutApplication(),setTimeout(()=>{$()},2))};setInterval(()=>{(typeof d!="object"||!d.mount)&&t()},1e3),e(document).ready(t),e(document.body).on("updated_checkout",t),e(document).on("give_gateway_loaded",t),e(document).on("give_option_change",t),e(".givewp-fields-gateways__gateway--gpos_givewp_v3 > label").on("click",()=>{setTimeout(t,100)}),e("input[name='radio-control-wc-payment-method-options']").on("change",function(s){s.target.value==="gpos"&&t()})}catch(d){console.error(d)}const{card:_,requested:h,binRetrieveReq:O,virtualPOS:vt,isInstallmentsActive:ft,installments:yt,plugin:gt,isProActive:Q,platformData:q,selectedInstallment:G,accountId:ht}=y(f(D)),{binRetrieve:bt,$:xt}=f(D);document.addEventListener("gpos-inputs-changed",async()=>{var s;const d=(s=_.value.bin)==null?void 0:s.replace(/\D/g,"").slice(0,8),e=G.value,t=q.value.amount;if(!d||d.length<8){h.value.bin="",_.value.type="",_.value.brand="",_.value.family="",_.value.bank_name="",_.value.bank_code="",_.value.country="",_.value.country_code="";return}(h.value.bin!==d||h.value.installment!==e||h.value.amount!==t)&&(h.value.bin=d,h.value.installment=e,h.value.amount=t,O.value&&O.value.abort(),await bt({bin:d,plugin:gt.value,platform_data:q.value,installment:e}).then(n=>{Q.value&&(vt.value=n==null?void 0:n.virtual_pos,yt.value=n==null?void 0:n.installments,ft.value=n==null?void 0:n.is_installments_active),_.value.type=n.card.type,_.value.brand=n.card.brand,_.value.family=n.card.family,_.value.bank_name=n.bank.name,_.value.bank_code=n.bank.code,_.value.country_code=n.country.code,_.value.country=n.country.name}),$())});U(_,$,{deep:!0});U(ht,$,{deep:!0});Q.value&&U(G,$,{deep:!0});xt(document).on({input:$},".gpos-checkout-class :input");const{platformData:wt}=y(f(D));document.addEventListener("gpos-platform-data-changed",async d=>{wt.value=d.detail});window.gposDispatchAmount=d=>{document.dispatchEvent(new CustomEvent("gpos-platform-data-changed",{detail:d})),$()};var H;switch((H=window.gpos)==null?void 0:H.plugin){case"elementor":F(()=>import("./elementor-3-7-95.js"),[]);break;case"woocommerce":F(()=>import("./woocommerce-3-7-95.js"),[]);break;case"ninja_forms":F(()=>import("./ninja-forms-3-7-95.js"),[]);break;case"wpforms":F(()=>import("./wpforms-3-7-95.js"),[]);break}function jt(d){window.gposCreateCheckoutApplication=()=>{const e=le({locale:"en",messages:window.gpos.strings,legacy:!1}),t=ie(d);return t.use(de),t.use(D),t.use(e),t.mount("#app"),document.dispatchEvent(new CustomEvent("gpos-form-loaded",{detail:window.gpos})),t}}export{De as S,At as _,Ft as a,Vt as b,jt as c,st as d,$ as i};
